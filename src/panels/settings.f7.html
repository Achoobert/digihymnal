<template>
  <div class="panel panel-right panel-reveal theme-dark">
    <div class="view">
      <div class="page">
        <div class="navbar">
          <div class="navbar-bg"></div>
          <div class="navbar-inner">
            <div class="title">Choose a language</div>
          </div>
        </div>
        <div class="page-content">
          <div class="list">
            <ul>
              {{#if loading}}
                {{#each "123456"}}
                  <li class="skeleton-text skeleton-effect-fade">
                    <a href="#">
                      checking Item 1
                    </a>
                  </li>
                {{/each}}
              {{else}}
                {{#each languages}}
                  <li>
                    <a @click="changeLanguage" data-languageCode="{{tag}}" class="item-link item-content">
                      <div class="item-inner">
                        <div class="item-title">{{#if local}}{{local}}{{else}}{{name}}{{/if}}</div>
                        <div class="item-after">{{#js_if '"en" == this.tag' }}<i class="fas fa-check-circle"></i>{{else}}<i class="far fa-circle"></i>{{/js_if}}</div>
                      </div>
                    </a>
                  </li>
                {{/each}}
              {{/if}}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>

// Import locales
const locale = require('../js/locales.js')

export default {
  // Component Data
  data: function () {
    // Must return an object
    return {
      loading: true
    }
  },
  on: {
    panelOpened: function(e, page) {
      var self = this;
      
      self.$setState({
        languages: locale.customLocales,
        loading: false
      });
    }
  },
  methods: {
    changeLanguage(event) {
      console.log(this.$$(event.currentTarget).data("languagecode"));
    }
  }
}
</script>